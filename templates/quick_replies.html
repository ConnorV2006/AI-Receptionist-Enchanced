{% extends "base.html" %}
{% block content %}
<div class="container">
  <h1>Manage Quick Replies for {{ clinic.name }}</h1>

  <!-- Add New Quick Reply -->
  <div class="card">
    <h2>Add New Quick Reply</h2>
    <form method="post">
      <div>
        <label>Title (label for staff)</label>
        <input type="text" name="title" placeholder="E.g. 'Running late'" required>
      </div>
      <div>
        <label>Message Body</label>
        <textarea name="body" rows="2" required></textarea>
      </div>
      <button type="submit">Add Template</button>
    </form>
  </div>

  <!-- Existing Quick Replies -->
  <div class="card">
    <h2>Existing Templates</h2>
    {% if replies %}
      <table>
        <tr>
          <th>Title</th>
          <th>Message</th>
          <th>Actions</th>
        </tr>
        {% for r in replies %}
        <tr>
          <td>{{ r.title }}</td>
          <td>{{ r.body }}</td>
          <td>
            <a href="{{ url_for('edit_quick_reply', slug=clinic.slug, reply_id=r.id) }}">Edit</a> |
            <form action="{{ url_for('delete_quick_reply', slug=clinic.slug, reply_id=r.id) }}" method="post" style="display:inline;">
              <button type="submit" onclick="return confirm('Delete this quick reply?')">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>No quick replies defined yet.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
